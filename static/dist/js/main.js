(()=>{function b(t){let e=null;if(document.cookie&&document.cookie!==""){let o=document.cookie.split(";");for(let n=0;n<o.length;n++){let d=o[n].trim();if(d.substring(0,t.length+1)===t+"="){e=decodeURIComponent(d.substring(t.length+1));break}}}return e}document.addEventListener("DOMContentLoaded",()=>{let t=document.getElementById("menu"),e=document.getElementById("menu-overlay"),o=document.getElementById("menu-toggle"),n=document.getElementById("menu-close"),d=()=>{t.classList.remove("-translate-x-full"),e.classList.remove("hidden"),document.body.classList.add("overflow-hidden")},a=()=>{t.classList.add("-translate-x-full"),e.classList.add("hidden"),document.body.classList.remove("overflow-hidden")};o?.addEventListener("click",d),n?.addEventListener("click",a),e?.addEventListener("click",a)});document.addEventListener("DOMContentLoaded",()=>{let t=document.getElementById("lang-toggle"),e=document.getElementById("lang-dropdown"),o=document.getElementById("lang-arrow"),n=document.getElementById("language-form"),d=document.getElementById("language-input"),a=document.getElementById("language-next"),s=document.querySelectorAll(".lang-option");if(!t||!e)return;let c=()=>window.location.pathname.replace(/^\/(ru|ar|en)(\/|$)/,"/")||"/";a&&(a.value=c()),t.addEventListener("click",i=>{i.stopPropagation(),e.classList.toggle("hidden"),o?.classList.toggle("rotate-180")}),s.forEach(i=>{i.addEventListener("click",()=>{let l=i.dataset.lang;n&&d&&(d.value=l,a&&(a.value=c()),n.submit())})}),document.addEventListener("click",i=>{!e.contains(i.target)&&!t.contains(i.target)&&(e.classList.add("hidden"),o?.classList.remove("rotate-180"))}),document.addEventListener("keydown",i=>{i.key==="Escape"&&(e.classList.add("hidden"),o?.classList.remove("rotate-180"))})});document.addEventListener("DOMContentLoaded",()=>{let t=document.getElementById("hero-logo"),e=document.getElementById("hero");if(!t||!e)return;let o=()=>{let n=e.getBoundingClientRect(),d=e.offsetHeight,a=-n.top,c=.7+Math.min(Math.max(a/d*2,0),1)*.3;t.style.transform=`scale(${c})`};window.addEventListener("scroll",o),o()});document.addEventListener("DOMContentLoaded",()=>{let t=document.getElementById("benefits"),e=t?.querySelector(".btn-default.primary");!t||!e||(e.addEventListener("mouseenter",()=>{t.classList.add("active")}),e.addEventListener("mouseleave",()=>{t.classList.remove("active")}))});document.addEventListener("DOMContentLoaded",()=>{let t=document.querySelector(".gallery-slider");if(!t)return;let e=t.querySelectorAll(".gallery-slide"),o=t.querySelectorAll(".gallery-title"),n=t.querySelector(".gallery-dots"),d=t.querySelector(".gallery-control.prev"),a=t.querySelector(".gallery-control.next");if(!e.length)return;let s=0,c=e.length,i,l=()=>{if(e.forEach((r,u)=>{r.dataset.index=u,u===0&&r.classList.add("active")}),o.forEach((r,u)=>{r.dataset.index=u,u===0&&r.classList.add("active")}),n){n.innerHTML="";for(let r=0;r<c;r++){let u=document.createElement("button");u.className=`gallery-dot${r===0?" active":""}`,u.dataset.index=r,u.setAttribute("aria-label",`Go to slide ${r+1}`),u.addEventListener("click",()=>{g(r),f()}),n.appendChild(u)}}},g=r=>{r<0&&(r=c-1),r>=c&&(r=0),e.forEach(v=>v.classList.remove("active")),e[r].classList.add("active"),o.forEach(v=>v.classList.remove("active")),o[r]&&o[r].classList.add("active");let u=t.querySelectorAll(".gallery-dot");u.forEach(v=>v.classList.remove("active")),u[r]&&u[r].classList.add("active"),s=r},m=()=>g(s+1),y=()=>g(s-1);d?.addEventListener("click",()=>{y(),f()}),a?.addEventListener("click",()=>{m(),f()});let h=()=>{i=setInterval(m,5e3)},f=()=>{clearInterval(i),h()},E=0;t.addEventListener("touchstart",r=>{E=r.changedTouches[0].screenX},{passive:!0}),t.addEventListener("touchend",r=>{let u=E-r.changedTouches[0].screenX;Math.abs(u)>50&&(u>0?m():y(),f())},{passive:!0}),t.setAttribute("tabindex","0"),t.addEventListener("keydown",r=>{r.key==="ArrowLeft"?(y(),f()):r.key==="ArrowRight"&&(m(),f())}),l(),h()});document.addEventListener("DOMContentLoaded",()=>{let t=document.querySelectorAll('input[name="period"]'),e=document.querySelectorAll('input[name="addons"]'),o=document.getElementById("total-price"),n=document.getElementById("original-price");if(!o)return;let d=s=>`AED ${s.toLocaleString()}`,a=()=>{let s=0,c=0,i=!1,l=document.querySelector('input[name="period"]:checked');l&&(s+=parseInt(l.dataset.price)||0,c+=parseInt(l.dataset.original)||parseInt(l.dataset.price)||0,l.dataset.discount&&parseInt(l.dataset.discount)>0&&(i=!0)),e.forEach(g=>{if(g.checked){let m=parseInt(g.dataset.price)||0;s+=m,c+=m}}),o.textContent=d(s),i&&c>s?(n.textContent=`/ ${d(c)}`,n.classList.remove("hidden")):n.classList.add("hidden")};t.forEach(s=>{s.addEventListener("change",a)}),e.forEach(s=>{s.addEventListener("change",a)}),a()});document.addEventListener("DOMContentLoaded",()=>{document.querySelectorAll("[data-copy-target]").forEach(e=>{e.addEventListener("click",()=>{let o=e.dataset.copyTarget,n=document.getElementById(o);if(!n)return;let d=n.textContent.trim(),a=e.dataset.copySuccess||"Copied!",s=e.textContent;navigator.clipboard.writeText(d).then(()=>{e.textContent=a,setTimeout(()=>{e.textContent=s},2e3)})})})});var p={};function I(){document.querySelectorAll("#map[data-coordinates]").forEach(e=>{let o=e.dataset.coordinates;if(!o||p[e.id])return;let[n,d]=o.split(",").map(c=>parseFloat(c.trim())),a=L.map(e,{zoomControl:!1}).setView([n,d],15);L.tileLayer("https://{s}.basemaps.cartocdn.com/light_nolabels/{z}/{x}/{y}{r}.png",{attribution:"\xA9 OpenStreetMap"}).addTo(a);let s=L.divIcon({html:`<svg width="40" height="48" viewBox="0 0 40 48" fill="#E26137" xmlns="http://www.w3.org/2000/svg">
                <path d="M20 0C9 0 0 9 0 20c0 15 20 28 20 28s20-13 20-28c0-11-9-20-20-20zm0 27c-3.9 0-7-3.1-7-7s3.1-7 7-7 7 3.1 7 7-3.1 7-7 7z"/>
                <circle cx="20" cy="20" r="5" fill="white"/>
            </svg>`,className:"",iconSize:[40,48],iconAnchor:[20,48]});L.marker([n,d],{icon:s}).addTo(a),p[e.id]=a})}function S(){document.querySelectorAll("[data-tab]").forEach(e=>{e.addEventListener("click",()=>{let o=e.dataset.tab,n=e.closest(".flex.flex-col");if(!n)return;n.querySelectorAll("[data-tab]").forEach(a=>{a.classList.remove("active")}),e.classList.add("active"),n.querySelectorAll("[data-tab-content]").forEach(a=>{a.classList.add("hidden")});let d=n.querySelector(`[data-tab-content="${o}"]`);d&&d.classList.remove("hidden"),o==="location"&&p.map&&setTimeout(()=>{p.map.invalidateSize()},100)})})}document.addEventListener("DOMContentLoaded",()=>{typeof L<"u"&&I(),S()});document.querySelectorAll(".modal-open").forEach(t=>{t.addEventListener("click",()=>{let e=t.dataset.modal,o=t.closest(".modal-overlay");o&&o.classList.remove("active"),document.getElementById(e)?.classList.add("active"),document.body.style.overflow="hidden"})});document.querySelectorAll(".modal-close").forEach(t=>{t.addEventListener("click",()=>{t.closest(".modal-overlay")?.classList.remove("active"),document.body.style.overflow=""})});document.querySelectorAll(".modal-overlay").forEach(t=>{t.addEventListener("click",e=>{e.target===t&&(t.classList.remove("active"),document.body.style.overflow="")})});document.addEventListener("keydown",t=>{t.key==="Escape"&&(document.querySelectorAll(".modal-overlay.active").forEach(e=>{e.classList.remove("active")}),document.body.style.overflow="")});document.addEventListener("DOMContentLoaded",()=>{let t=document.querySelector("#phone");t&&(t.addEventListener("input",e=>{let o=e.target.value.replace(/\D/g,"");e.target.value=o?"+"+o:""}),t.addEventListener("focus",e=>{e.target.value||(e.target.value="+")}),t.addEventListener("blur",e=>{e.target.value==="+"&&(e.target.value="")}))});document.querySelectorAll(".password-toggle").forEach(t=>{t.addEventListener("click",()=>{let e=t.parentElement.querySelector("input"),o=t.querySelector(".eye-open"),n=t.querySelector(".eye-closed");e.type==="password"?(e.type="text",o.classList.remove("hidden"),n.classList.add("hidden")):(e.type="password",o.classList.add("hidden"),n.classList.remove("hidden"))})});document.addEventListener("DOMContentLoaded",()=>{new URLSearchParams(window.location.search).get("reset")==="success"&&(document.getElementById("modal-password-reset-success")?.classList.add("active"),window.history.replaceState({},"",window.location.pathname))});document.addEventListener("DOMContentLoaded",()=>{let t=document.querySelector('form[action*="/booking/"]');if(!t)return;let e=typeof isAuthenticated<"u"?isAuthenticated:!1;if(e){let o=sessionStorage.getItem("pendingBooking");if(o){let n=JSON.parse(o);if(!n.period){sessionStorage.removeItem("pendingBooking");return}sessionStorage.removeItem("pendingBooking");let d=b("csrftoken");if(!d){alert("Session error. Please try again.");return}let a=document.createElement("form");a.setAttribute("method","POST"),a.setAttribute("action",n.url),a.style.display="none";let s=document.createElement("input");s.setAttribute("type","hidden"),s.setAttribute("name","csrfmiddlewaretoken"),s.setAttribute("value",d),a.appendChild(s);let c=document.createElement("input");c.setAttribute("type","hidden"),c.setAttribute("name","period"),c.setAttribute("value",n.period),a.appendChild(c),n.addons&&n.addons.length>0&&n.addons.forEach(i=>{let l=document.createElement("input");l.setAttribute("type","hidden"),l.setAttribute("name","addons"),l.setAttribute("value",i),a.appendChild(l)}),document.body.appendChild(a),a.submit();return}}t.addEventListener("submit",function(o){let n=document.querySelector('input[name="period"]:checked');if(!n){o.preventDefault(),alert("Please select a rental period");return}if(!e){o.preventDefault();let d=n.value,a=[];document.querySelectorAll('input[name="addons"]:checked').forEach(i=>{a.push(i.value)}),sessionStorage.setItem("pendingBooking",JSON.stringify({url:t.action,period:d,addons:a}));let s=encodeURIComponent(window.location.pathname),c=document.getElementById("modal-sign-in");c&&(c.querySelectorAll(".btn-email-login, .btn-google-login, .btn-apple-login, .btn-register-link").forEach(i=>{if(i.getAttribute("href")){let l=i.getAttribute("href").split("?")[0];i.href=l+"?next="+s}}),c.classList.add("active"),document.body.style.overflow="hidden")}})});document.addEventListener("DOMContentLoaded",()=>{let t=document.getElementById("feedback-form");t&&t.addEventListener("submit",async o=>{o.preventDefault();let n=t.querySelector('button[type="submit"]'),d=n.innerHTML;n.disabled=!0,n.innerHTML='<svg class="animate-spin h-5 w-5 mx-auto" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4" fill="none"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg>';try{let a=new FormData(t),c=await(await fetch(t.dataset.url,{method:"POST",body:a,headers:{"X-Requested-With":"XMLHttpRequest"}})).json();document.getElementById("modal-feedback").classList.remove("active"),c.success?(document.getElementById("modal-feedback-success").classList.add("active"),t.reset()):document.getElementById("modal-feedback-error").classList.add("active")}catch{document.getElementById("modal-feedback").classList.remove("active"),document.getElementById("modal-feedback-error").classList.add("active")}finally{n.disabled=!1,n.innerHTML=d}});let e=document.getElementById("btn-retry-feedback");e&&e.addEventListener("click",()=>{document.getElementById("modal-feedback-error").classList.remove("active"),document.getElementById("modal-feedback").classList.add("active")})});document.addEventListener("DOMContentLoaded",()=>{let t=document.getElementById("user-menu-toggle"),e=document.getElementById("user-menu-dropdown"),o=document.getElementById("user-menu-arrow");t&&e&&(t.addEventListener("click",n=>{n.stopPropagation(),e.classList.toggle("hidden"),o&&o.classList.toggle("rotate-180")}),document.addEventListener("click",n=>{!t.contains(n.target)&&!e.contains(n.target)&&(e.classList.add("hidden"),o&&o.classList.remove("rotate-180"))}))});document.addEventListener("DOMContentLoaded",()=>{let t=document.querySelectorAll(".reveal-card");if(t.length===0)return;let e={root:null,rootMargin:"0px 0px -50px 0px",threshold:.1},o=new IntersectionObserver(n=>{n.forEach(d=>{d.isIntersecting&&(d.target.classList.add("revealed"),o.unobserve(d.target))})},e);t.forEach(n=>{o.observe(n)})});document.addEventListener("DOMContentLoaded",()=>{let t=document.querySelector(".car-slider-container");if(!t)return;let e=t.querySelectorAll(".car-slide");if(e.length<2)return;let o=0,n=4e3;function d(){return new Promise(s=>{let c=0,i=e.length;e.forEach(l=>{l.complete&&l.naturalHeight!==0?(c++,c===i&&s()):(l.addEventListener("load",()=>{c++,c===i&&s()},{once:!0}),l.addEventListener("error",()=>{c++,c===i&&s()},{once:!0}))}),c===i&&s()})}function a(){e[o].classList.remove("active"),o=(o+1)%e.length,e[o].classList.add("active")}d().then(()=>{t.classList.add("loaded"),e.forEach((s,c)=>{s.classList.toggle("active",c===0)}),setInterval(a,n)})});})();
